"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[975],{975:(e,n,s)=>{s.r(n),s.d(n,{default:()=>a});var t=s(43),d=s(238),r=s(434),i=s(625),o=(s(850),s(579));const a=()=>{const{contests:e,setContests:n,currentContestId:s,setCurrentContestId:a,addContest:l,updateContest:c}=(0,r.D)(),{logout:h}=(0,i.A)(),u=(0,t.useRef)(null),[m,x]=(0,t.useState)("contestant"),[b,j]=(0,t.useState)(""),[f,g]=(0,t.useState)(""),[p,v]=(0,t.useState)(!1),[C,k]=(0,t.useState)(1),[y,N]=(0,t.useState)(""),S=e.find((e=>e.id===s))||e[0],w=(null===S||void 0===S?void 0:S.contestants.filter((e=>e.idNumber.includes(y)||e.name.includes(y)||e.school.includes(y)||e.group.includes(y)||e.room.includes(y)||e.number.includes(y)||e.docId.includes(y))))||[],R=Math.ceil(w.length/20),W=w.slice(20*(C-1),20*C);t.useEffect((()=>{g(S.notice),v(!1)}),[s,S.notice]);return(0,o.jsxs)("div",{className:"dashboard-root",children:[(0,o.jsxs)("aside",{className:"dashboard-sidebar",children:[(0,o.jsx)("div",{className:"sidebar-title",children:"\u7ba1\u7406\u5f8c\u53f0"}),(0,o.jsx)("div",{className:"sidebar-link"+("contestant"===m?" active":""),onClick:()=>x("contestant"),children:"\u53c3\u8cfd\u8005\u7ba1\u7406"}),(0,o.jsx)("div",{className:"sidebar-link"+("notice"===m?" active":""),onClick:()=>x("notice"),children:"\u6bd4\u8cfd\u9808\u77e5"})]}),(0,o.jsxs)("div",{className:"dashboard-main",children:[(0,o.jsxs)("nav",{className:"dashboard-navbar",children:[(0,o.jsx)("div",{className:"navbar-title",children:"\u6fb3\u9580\u5b78\u806f\u96fb\u5b50\u53c3\u8cfd\u8b49\u7ba1\u7406\u7cfb\u7d71"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)("select",{value:s,onChange:e=>a(e.target.value),style:{fontSize:"1rem",padding:"0.3rem 0.7rem",borderRadius:8},children:e.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))}),(0,o.jsx)("input",{type:"text",value:b,onChange:e=>j(e.target.value),placeholder:"\u65b0\u589e\u6bd4\u8cfd\u540d\u7a31",style:{fontSize:"1rem",padding:"0.3rem 0.7rem",borderRadius:8}}),(0,o.jsx)("button",{onClick:()=>{b.trim()&&(l(b.trim()),j(""))},style:{background:"#2176ff",color:"#fff",border:"none",borderRadius:8,padding:"0.3rem 1rem",fontWeight:600},children:"\u65b0\u589e"}),(0,o.jsx)("button",{onClick:h,children:"\u767b\u51fa"})]})]}),(0,o.jsxs)("div",{className:"dashboard-content",children:["contestant"===m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"dashboard-section",children:[(0,o.jsx)("h2",{children:"EXCEL \u6279\u91cf\u5c0e\u5165\u53c3\u8cfd\u8005\u8cc7\u6599"}),(0,o.jsx)("input",{type:"file",accept:".xlsx,.xls",ref:u,onChange:e=>{var n;const t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!t)return;const r=new FileReader;r.onload=e=>{var n;const t=null===(n=e.target)||void 0===n?void 0:n.result;if(!t)return;const r=d.LF(t,{type:"binary"}),i=r.SheetNames[0],o=r.Sheets[i],a=d.Wp.sheet_to_json(o,{defval:""}).map((e=>({idNumber:e["\u8b49\u4ef6\u865f\u78bc"]||"",name:e["\u59d3\u540d"]||"",school:e["\u5b78\u6821"]||"",group:e["\u7d44\u5225"]||"",room:e["\u6bd4\u8cfd\u8ab2\u5ba4"]||"",number:e["\u53c3\u8cfd\u7de8\u865f"]||"",docId:e["\u8b49\u4ef6\u7de8\u865f"]||""})));c(s,{contestants:a}),k(1)},r.readAsBinaryString(t)}}),(0,o.jsx)("button",{onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u79fb\u9664\u672c\u5834\u6bd4\u8cfd\u6240\u6709\u53c3\u8cfd\u8005\u8cc7\u6599\u55ce\uff1f")&&(c(s,{contestants:[]}),k(1))},style:{marginLeft:16,background:"#e74c3c",color:"#fff",border:"none",borderRadius:8,padding:"0.3rem 1rem",fontWeight:600},children:"\u79fb\u9664\u672c\u5834\u6240\u6709\u8cc7\u6599"}),(0,o.jsx)("button",{onClick:()=>{const e=d.Wp.json_to_sheet(S.contestants),n=d.Wp.book_new();d.Wp.book_append_sheet(n,e,"\u53c3\u8cfd\u8005\u8cc7\u6599"),d._h(n,`${S.name}_\u53c3\u8cfd\u8005\u8cc7\u6599.xlsx`)},style:{marginLeft:16,background:"#3ecf8e",color:"#232946",border:"none",borderRadius:8,padding:"0.3rem 1rem",fontWeight:600},children:"\u532f\u51faEXCEL"}),(0,o.jsxs)("div",{style:{marginTop:"1rem",color:"#888",fontSize:"0.98rem",background:"#f0f4ff",borderRadius:8,padding:"0.7rem 1rem"},children:[(0,o.jsx)("b",{children:"Google Sheet/\u81ea\u52d5\u540c\u6b65"}),"\uff08\u958b\u767c\u4e2d\uff0c\u672a\u4f86\u53ef\u76f4\u63a5\u9023\u63a5 Google \u8868\u55ae\u6216\u81ea\u52d5\u540c\u6b65\u5831\u540d\u8cc7\u6599\uff09"]})]}),(0,o.jsxs)("div",{className:"dashboard-section",children:[(0,o.jsx)("h2",{children:"\u53c3\u8cfd\u8005\u8cc7\u6599\u9810\u89bd"}),(0,o.jsx)("div",{style:{marginBottom:12},children:(0,o.jsx)("input",{type:"text",value:y,onChange:e=>{N(e.target.value),k(1)},placeholder:"\u641c\u5c0b\u59d3\u540d\u3001\u8b49\u4ef6\u865f\u78bc\u3001\u5b78\u6821\u7b49...",style:{fontSize:"1rem",padding:"0.3rem 0.7rem",borderRadius:8,width:260}})}),(0,o.jsx)("div",{className:"dashboard-table-wrapper",children:(0,o.jsxs)("table",{className:"dashboard-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u8b49\u4ef6\u865f\u78bc"}),(0,o.jsx)("th",{children:"\u59d3\u540d"}),(0,o.jsx)("th",{children:"\u5b78\u6821"}),(0,o.jsx)("th",{children:"\u7d44\u5225"}),(0,o.jsx)("th",{children:"\u6bd4\u8cfd\u8ab2\u5ba4"}),(0,o.jsx)("th",{children:"\u53c3\u8cfd\u7de8\u865f"}),(0,o.jsx)("th",{children:"\u8b49\u4ef6\u7de8\u865f"}),(0,o.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,o.jsx)("tbody",{children:W.map(((e,n)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.idNumber}),(0,o.jsx)("td",{children:e.name}),(0,o.jsx)("td",{children:e.school}),(0,o.jsx)("td",{children:e.group}),(0,o.jsx)("td",{children:e.room}),(0,o.jsx)("td",{children:e.number}),(0,o.jsx)("td",{children:e.docId}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{onClick:()=>(e=>{if(window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u53c3\u8cfd\u8005\u8cc7\u6599\uff1f")){const n=[...S.contestants];n.splice(e,1),c(s,{contestants:n})}})(20*(C-1)+n),style:{background:"#e74c3c",color:"#fff",border:"none",borderRadius:6,padding:"0.2rem 0.7rem",fontWeight:600,fontSize:"0.95rem"},children:"\u522a\u9664"})})]},n)))})]})}),R>1&&(0,o.jsxs)("div",{style:{marginTop:16,display:"flex",justifyContent:"center",gap:8},children:[(0,o.jsx)("button",{onClick:()=>k((e=>Math.max(1,e-1))),disabled:1===C,children:"\u4e0a\u4e00\u9801"}),(0,o.jsxs)("span",{children:["\u7b2c ",C," / ",R," \u9801"]}),(0,o.jsx)("button",{onClick:()=>k((e=>Math.min(R,e+1))),disabled:C===R,children:"\u4e0b\u4e00\u9801"})]})]})]}),"notice"===m&&(0,o.jsxs)("div",{className:"dashboard-section",children:[(0,o.jsx)("h2",{children:"\u6bd4\u8cfd\u9808\u77e5\u5167\u5bb9\u7de8\u8f2f"}),(0,o.jsx)("textarea",{value:f,onChange:e=>{g(e.target.value),v(!1)},rows:12,style:{width:"100%",fontSize:"1rem",padding:"0.5rem"}}),(0,o.jsx)("button",{onClick:()=>{c(s,{notice:f}),v(!0),setTimeout((()=>v(!1)),1500)},style:{marginTop:12,background:"#2176ff",color:"#fff",border:"none",borderRadius:8,padding:"0.4rem 1.2rem",fontWeight:600},children:"\u5132\u5b58"}),p&&(0,o.jsx)("span",{style:{marginLeft:16,color:"#3ecf8e",fontWeight:600},children:"\u5df2\u5132\u5b58\uff01"})]})]})]})]})}}}]);
//# sourceMappingURL=975.ebcf4ae6.chunk.js.map